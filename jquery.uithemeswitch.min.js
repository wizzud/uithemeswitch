/*
 jquery.uithemeswitch.js
 requires jquery.ui.accordion.js, and optionally jquery.cookie.js
*/
(function(a){if(!a.uithemeswitch)a.uithemeswitch={version:"1.0",options:{uiVersion:"1.8.13",compact:0,loadTheme:null,text:{prompt:"Switch Theme",current:"Theme: ",reset:"Reset Theme",remember:"Remember"},width:null,maxHeight:200,closeSelect:1,closeMouseout:"panel",cookie:{name:"jquery-ui-theme",expires:null,path:"",domain:"",secure:window.location.protocol==="https:"},showRemember:0,rememberedTheme:"",forceRemember:null,keep:2,sorted:1,showReset:0,themeRollover:1,onLoad:a.noop,onRemember:a.noop,onReset:a.noop,
onSelect:a.noop},cssCDN:"http://ajax.googleapis.com/ajax/libs/jqueryui/{uiVersion}/themes/{folder}/jquery-ui.css",thumbCDN:"http://static.jquery.com/ui/themeroller/images/themeGallery/theme_{thumbsize_30_90}_{thumb}.png",themes:{"UI Lightness":{thumb:"ui_light"},"UI Darkness":{thumb:"ui_dark"},Smoothness:{},Start:{thumb:"start_menu"},Redmond:{thumb:"windoze"},Sunny:{},Overcast:{},"Le Frog":{},Flick:{},"Pepper Grinder":{},Eggplant:{},"Dark Hive":{},Cupertino:{},"South St":{folder:"south-street"},Blitzer:{},
Humanity:{},"Hot Sneaks":{},"Excite Bike":{},Vader:{thumb:"black_matte"},"Dot Luv":{},"Mint Choc":{thumb:"mint_choco"},"Black Tie":{},Trontastic:{},"Swanky Purse":{}},currentTheme:"",resetTheme:"",destroy:function(){var e=a(".uithemeswitch-content, .uithemeswitch-header",this).hide();a(this).accordion("destroy").removeClass("uithemeswitch");e.remove()},init:function(e){var i=a(this),d=a.uithemeswitch,b=a.extend(!0,{},d.options,e),e=!!b.compact,n=d.cssCDN.replace(/\{uiVersion\}/g,b.uiVersion),A=d.thumbCDN.replace(/\{thumbsize_30_90\}/g,
e?"30":"90"),h=a.extend(!0,{},d.themes),l=a.isFunction(b.cookie)?2:b.cookie&&b.cookie.name&&a.cookie?1:0,o=l===1?a.cookie(b.cookie.name):l?b.rememberedTheme||"":"",q=o||b.loadTheme||"",t=0,m=null,f="",k=l&&b.forceRemember!==!1&&(b.forceRemember===!0||!!o||!b.showRemember),p=a('<div><a href="#">'+b.text.prompt+"</a></div>"),u=function(){if(b.closeSelect&&f.is(":visible")){var c=i.accordion("option","animated");i.accordion("option","animated",!1);a("ul",f).get(0).scrollTop=0;p.trigger("click").blur();
i.accordion("option","animated",c)}},v=function(c){k||(c=!1);l===2?b.cookie(c,h[c]||{}):l&&a.cookie(b.cookie.name,c||null,b.cookie)},r=function(c){var j=a("body").get(0),g;if(j)g=a.grep((j.className||"").split(/\s+/),function(c){return c&&!/^uithemeswitch-theme-/.test(c)}),c?g.push("uithemeswitch-theme-"+h[c].bodycls):d.resetTheme&&g.push(d.resetTheme),j.className=g.join(" ");a(".uithemeswitch-header a:not(.uithemeswitch-rollover)").text(c?b.text.current+c:b.text.prompt);v(c)},s=function(c){return/^mouse(leave|out)$/.test(c.type)},
w=function(c){return h[c].cdn===!1?h[c].folder:n.replace(/\{.*?\}/g,h[c].folder)},o=function(c){d.currentTheme&&a(this).text(s(c)?b.text.prompt:b.text.current+d.currentTheme)},x=function(c){s(c)&&f.is(":visible")&&p.trigger("click").blur();return!1},y=function(c){var j=w(c),g=a("head link"),d=g.filter(".ui-theme"),e=d.filter('[href="'+j+'"]');e.length?(d.slice(d.index(e)+1).remove(),d=[]):(j=a('<link href="'+j+'" type="text/css" rel="stylesheet" class="ui-theme ui-switcher" />'),g=d.length?d.last():
g.not(d).filter('[href$="jquery-ui.css"]').last(),g.length?g.after(j):a("head").append(j));r(c);d.length>=b.keep&&d.first().remove()},z=function(){var c=null;a("head link").filter('[href$="jquery-ui.css"]').each(function(){for(var a in h)w(a)===this.href&&(c=a)});return c},B=function(c){var b=a(c).is("input");a(".uithemeswitch-remember input").not(c).each(function(){this.checked=!this.checked});k=!k;v(d.currentTheme);return b},C=function(){a("head link.ui-switcher").remove();a("body").each(function(){var c=
d.resetTheme||"",b=a.grep((this.className||"").split(/\s+/),function(a){return!!a&&(a===c||!/^uithemeswitch-theme-/.test(a))});c&&b.push(c);this.className=b.join(" ")});r(z());u();d.currentTheme=""};b.sorted&&(h=function(){var c=[],a=0,b={},d;for(d in h)c[a++]=d;c.sort();for(a=0;a<c.length;a++)b[c[a]]=h[c[a]];return b}());if(b.keep<1)b.keep=1;f+='<li class="uithemeswitch-remember"><div>'+b.text.remember+'<input type="checkbox" value="1" /></div></li>';f+='<li class="uithemeswitch-reset"><div>'+b.text.reset+
"</div></li>";a.each(h,function(a,b){var d;if(b)b.cdn===!1?(b.bodycls=a.toLowerCase().replace(/\s+/g,"-"),d=b.thumb):(b.folder=b.folder||a.toLowerCase().replace(/\s+/g,"-"),b.thumb=b.thumb||b.folder.replace(/-/g,"_"),b.bodycls=b.folder,d=A.replace(/\{.*?\}/g,b.thumb)),b.folder&&b.thumb&&(f+=['<li data-uitheme="','"><div style="background-image:url('+d+');">',"</div></li>"].join(a),a===q&&(t=1))});f=a("<div><ul>"+f+"</ul></div>");d.currentTheme?m=d.currentTheme:(m=z(),a("body").each(function(){var a=
this.className||"";a&&(a=(" "+a+" ").match(/\s(uithemeswitch-theme-[^ ]+)\s/));if(a)d.resetTheme=a[1]}));f.css({padding:"0"});b.closeMouseout==="panel"?f.hover(x):b.closeMouseout==="widget"&&i.hover(x);a("ul",f).css({listStyleType:"none",margin:0,padding:0,overflow:"auto",overflowX:"hidden",maxHeight:b.maxHeight,width:"100%",cursor:"pointer"}).addClass("ui-corner-bottom").click(function(c){var e=a(c.target).closest("li"),g=e.data("uitheme")||"",f=!1;g&&h[g]&&g!==d.currentTheme&&b.onSelect(g,d.currentTheme,
k)!==!1?(y(g),u(),b.onLoad(g,d.currentTheme),d.currentTheme=g):e.hasClass("uithemeswitch-reset")&&b.onReset(d.currentTheme,d.resetTheme,k)!==!1?C():e.hasClass("uithemeswitch-remember")&&(f=b.onRemember(k)!==!1?B(c.target):!1);return f});a("li",f).css({width:"100%",padding:"0.1em 0",margin:0,display:"block",overflow:"hidden"}).hover(function(b){a(">div",this).toggleClass("ui-state-hover",!s(b))}).find("div").css({backgroundPosition:e?"6px 0":"50% 95%",backgroundRepeat:"no-repeat",textAlign:e?"left":
"center",fontWeight:"normal",padding:e?"0.5em 0 0.5em 42px":"0 0 82px 0",margin:e?"0 2px 0 2px":"0 1px 0 2px"}).addClass("ui-widget-content ui-corner-all");a("li.uithemeswitch-reset div",f).css({backgroundImage:"none",padding:"2px 0 2px 10px",textAlign:"left",fontWeight:"bold"}).parent()[b.showReset?"show":"hide"]();a("li.uithemeswitch-remember div",f).css({backgroundImage:"none",padding:"2px 0 2px 10px",textAlign:"left",fontWeight:"bold"}).find("input").each(function(){this.checked=k}).css({marginLeft:"2em",
verticalAlign:"bottom",cursor:"pointer"}).end().parent()[l&&b.showRemember?"show":"hide"]();b.width&&i.css({width:b.width});b.themeRollover&&a("a",p).addClass("uithemeswitch-rollover").hover(o);i.addClass("uithemeswitch").append(p.addClass("uithemeswitch-header")).append(f.addClass("uithemeswitch-content").hide()).accordion({active:!1,collapsible:!0});m&&r(m);t?(y(q),d.currentTheme=q):d.currentTheme=m||""}},a.fn.uithemeswitch=function(e,i){a.fn.accordion&&this.each(function(){var d=a.uithemeswitch,
b=a(this).hasClass("uithemeswitch"),n=a(this).data("uithemeswitch");e==="destroy"&&b?d[e].call(this):e==="reset"&&b?a(".uithemeswitch-reset",this).trigger("click"):e==="select"&&i?a('.uithemeswitch-content li:[data-uitheme="'+i+'"]').trigger("click"):b||d.init.call(this,a.extend({},e||{},a.isPlainObject(n)?n:{}))});return this}})(jQuery);